<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ ORBITX - Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========== Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        }
        
        :root {
            --space-dark: #0a0a2a;
            --space-blue: #1a1a4a;
            --space-purple: #4a1a8a;
            --neon-blue: #00c6ff;
            --neon-purple: #8a2be2;
            --warning-red: #ff5555;
            --success-green: #00ff88;
        }
        
        body {
            background: var(--space-dark);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ========== Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ========== */
        #stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        /* ========== Ø§Ù„Ù‡ÙŠØ¯Ø± ========== */
        header {
            background: rgba(10, 10, 42, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-bottom: 2px solid var(--neon-purple);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo i {
            font-size: 32px;
            color: var(--neon-blue);
        }
        
        /* ========== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ========== */
        .btn {
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--neon-purple), #6a11cb);
            color: white;
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            border: 2px solid var(--neon-purple);
            color: var(--neon-purple);
        }
        
        .btn-danger {
            background: var(--warning-red);
            color: white;
        }
        
        .btn-success {
            background: var(--success-green);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* ========== Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ========== */
        .hero-section {
            text-align: center;
            padding: 80px 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .hero-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            color: #aaa;
            margin-bottom: 40px;
            line-height: 1.6;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        /* ========== Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… ========== */
        .rules-section {
            background: rgba(26, 26, 74, 0.7);
            border-radius: 20px;
            padding: 40px;
            margin: 40px auto;
            max-width: 900px;
            border: 1px solid rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .rules-title {
            text-align: center;
            color: var(--neon-blue);
            margin-bottom: 30px;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .rules-list {
            list-style: none;
        }
        
        .rules-list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(138, 43, 226, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
        }
        
        .rules-list li:last-child {
            border-bottom: none;
        }
        
        .rules-list i {
            color: var(--neon-purple);
            font-size: 1.3rem;
            min-width: 30px;
        }
        
        /* ========== Ø§Ù„Ù…Ø­Ø·Ø§Øª ========== */
        .stations-section {
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .section-title {
            color: var(--neon-blue);
            font-size: 2rem;
        }
        
        .stations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .station-card {
            background: rgba(26, 26, 74, 0.8);
            border: 1px solid var(--space-purple);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .station-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
        }
        
        .station-card:hover {
            transform: translateY(-10px);
            border-color: var(--neon-purple);
            box-shadow: 0 15px 35px rgba(138, 43, 226, 0.2);
        }
        
        .station-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .station-title {
            font-size: 1.4rem;
            color: var(--neon-blue);
            margin-bottom: 5px;
            flex: 1;
        }
        
        .station-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .status-active {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-green);
        }
        
        .status-full {
            background: rgba(255, 85, 85, 0.2);
            color: var(--warning-red);
        }
        
        .station-description {
            color: #ccc;
            margin-bottom: 20px;
            line-height: 1.5;
            min-height: 60px;
        }
        
        .station-meta {
            display: flex;
            justify-content: space-between;
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(138, 43, 226, 0.2);
        }
        
        .station-participants {
            color: var(--neon-blue);
            font-weight: bold;
        }
        
        /* ========== Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: var(--space-blue);
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            border: 2px solid var(--neon-purple);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: modalAppear 0.3s ease;
        }
        
        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            color: var(--neon-blue);
            font-size: 1.8rem;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-btn:hover {
            color: var(--warning-red);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #ddd;
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            background: rgba(10, 10, 42, 0.7);
            border: 1px solid var(--space-purple);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--neon-purple);
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.3);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        /* ========== ØºØ±ÙØ© Ø§Ù„Ù…Ø­Ø·Ø© ========== */
        .room-container {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .room-title-section {
            flex: 1;
        }
        
        .room-title {
            color: var(--neon-blue);
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .room-owner {
            color: #aaa;
            font-size: 1rem;
        }
        
        .timer-container {
            background: rgba(255, 85, 85, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 85, 85, 0.3);
        }
        
        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--warning-red);
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .timer-label {
            color: #aaa;
            font-size: 1rem;
        }
        
        .chat-container {
            background: rgba(10, 10, 42, 0.9);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid var(--space-purple);
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: rgba(138, 43, 226, 0.1);
            border-radius: 4px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--neon-purple);
            border-radius: 4px;
        }
        
        .message {
            background: rgba(138, 43, 226, 0.2);
            padding: 12px 18px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-right: 3px solid var(--neon-purple);
            max-width: 80%;
        }
        
        .message-sender {
            color: var(--neon-blue);
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .message-content {
            color: #eee;
            line-height: 1.4;
        }
        
        .message-time {
            color: #888;
            font-size: 0.8rem;
            margin-top: 5px;
            text-align: left;
        }
        
        .message.system {
            background: rgba(0, 198, 255, 0.2);
            border-right-color: var(--neon-blue);
            text-align: center;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px;
            background: rgba(26, 26, 74, 0.8);
            border: 1px solid var(--space-purple);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
        }
        
        .chat-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .cooldown-notice {
            color: var(--warning-red);
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
            height: 20px;
        }
        
        /* ========== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± ========== */
        .admin-panel {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 12px 25px;
            background: rgba(26, 26, 74, 0.7);
            border: none;
            border-radius: 10px;
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .admin-tab.active {
            background: var(--neon-purple);
            color: white;
        }
        
        .admin-tab:hover:not(.active) {
            background: rgba(138, 43, 226, 0.3);
            color: #ddd;
        }
        
        .admin-table {
            width: 100%;
            background: rgba(26, 26, 74, 0.7);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--space-purple);
        }
        
        .admin-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            background: rgba(138, 43, 226, 0.3);
            padding: 15px;
            text-align: right;
            color: var(--neon-blue);
            border-bottom: 1px solid var(--space-purple);
        }
        
        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.1);
        }
        
        .admin-table tr:hover {
            background: rgba(138, 43, 226, 0.1);
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
        }
        
        .admin-btn {
            padding: 8px 15px;
            font-size: 0.85rem;
        }
        
        /* ========== Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ========== */
        .status-badge {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }
        
        .status-connected {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-green);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        
        .status-disconnected {
            background: rgba(255, 85, 85, 0.2);
            color: var(--warning-red);
            border: 1px solid rgba(255, 85, 85, 0.3);
        }
        
        /* ========== Ø§Ù„ÙÙˆØªØ± ========== */
        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 80px;
            border-top: 1px solid var(--space-purple);
            color: #888;
            background: rgba(10, 10, 42, 0.5);
        }
        
        .footer-creators {
            color: var(--neon-purple);
            margin-top: 20px;
            font-size: 1.1rem;
        }
        
        .footer-creators span {
            color: var(--neon-blue);
            font-weight: bold;
        }
        
        /* ========== Ù…ØªØ¬Ø§ÙˆØ¨ ========== */
        @media (max-width: 768px) {
            .hero-title { font-size: 2.5rem; }
            .stations-grid { grid-template-columns: 1fr; }
            .section-header { flex-direction: column; align-items: flex-start; }
            .admin-tabs { flex-direction: column; }
            .admin-table { overflow-x: auto; }
            .room-header { flex-direction: column; }
            .form-actions { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
        }
        
        /* ========== ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙŠØ²Ùƒ ========== */
        .meteor {
            position: fixed;
            top: 0;
            left: 0;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--warning-red), var(--neon-blue), transparent);
            z-index: 9999;
            pointer-events: none;
            animation: meteorFall 2s linear forwards;
        }
        
        @keyframes meteorFall {
            0% { transform: translateX(-100px) translateY(-100px) rotate(-45deg); opacity: 1; }
            100% { transform: translateX(100vw) translateY(100vh) rotate(-45deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ù†Ø¬ÙˆÙ… -->
    <div id="stars-container"></div>
    
    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
    <div id="statusBadge" class="status-badge status-disconnected">
        <i class="fas fa-plug"></i>
        <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
    </div>
    
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header>
        <div class="logo">
            <i class="fas fa-satellite"></i>
            <span>ORBITX</span>
        </div>
        <div id="headerButtons">
            <button class="btn btn-secondary" onclick="showPage('home')">
                <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </button>
            <button class="btn btn-primary" onclick="showPage('stations')">
                <i class="fas fa-satellite-dish"></i> Ø§Ù„Ù…Ø­Ø·Ø§Øª
            </button>
            <button class="btn btn-secondary" onclick="showPage('admin')" id="adminBtn" style="display:none;">
                <i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            </button>
            <button class="btn btn-secondary" onclick="toggleLoginModal()" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </button>
        </div>
    </header>
    
    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <main id="mainContent">
        <section class="hero-section">
            <h1 class="hero-title">Ø§Ù†Ø·Ù„Ù‚ ÙÙŠ Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© ğŸš€</h1>
            <p class="hero-subtitle">
                ORBITX Ù‡Ùˆ Ù…Ù†ØµØ© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ù†ÙˆØ¹Ù‡Ø§. Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…ØªØ®ØµØµØ©ØŒ 
                ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ ÙÙŠ Ø¨ÙŠØ¦Ø© Ù…Ø­ÙØ²Ø©ØŒ ÙˆØ§Ø±ÙØ¹ Ù…Ù† Ø¥Ù†ØªØ§Ø¬ÙŠØªÙƒ Ø¨Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ ÙŠØ±Ø§Ù‚Ø¨ ØªØ±ÙƒÙŠØ²Ùƒ ÙˆÙŠÙƒØ§ÙØ¦Ùƒ Ø¹Ù„ÙŠÙ‡.
            </p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="showPage('stations')">
                    <i class="fas fa-rocket"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø­Ù„Ø©
                </button>
                <button class="btn btn-secondary" onclick="showPage('rules')">
                    <i class="fas fa-info-circle"></i> ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯
                </button>
                <button class="btn btn-primary" onclick="showCreateStationModal()">
                    <i class="fas fa-plus-circle"></i> Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø©
                </button>
            </div>
        </section>
        
        <!-- Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <section id="rulesSection" class="rules-section" style="display:none;">
            <h2 class="rules-title"><i class="fas fa-book"></i> Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ©</h2>
            <ul class="rules-list">
                <li><i class="fas fa-users"></i> <strong>Ø§Ù„Ø³Ø¹Ø©:</strong> ÙƒÙ„ Ù…Ø­Ø·Ø© ØªØ³ØªÙˆØ¹Ø¨ 25 Ø´Ø®ØµØ§Ù‹ ÙÙ‚Ø·</li>
                <li><i class="fas fa-user-check"></i> <strong>Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:</strong> ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù…Ø­Ø·Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ÙÙŠ ÙƒÙ„ ÙˆÙ‚Øª</li>
                <li><i class="fas fa-clock"></i> <strong>Ø§Ù„ÙˆÙ‚Øª:</strong> ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø·Ø© ÙŠØªÙ†Ø§Ù‚Øµ ÙˆÙŠØ­Ø°Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</li>
                <li><i class="fas fa-comment"></i> <strong>Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©:</strong> Ù…Ø³Ù…ÙˆØ­ Ø¨Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†</li>
                <li><i class="fas fa-bolt"></i> <strong>Ø§Ù„Ø·Ø§Ù‚Ø©:</strong> Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø£Ùˆ ØªØ®Ø³Ø± Ù†Ù‚Ø§Ø· Ø§Ù„Ø·Ø§Ù‚Ø©</li>
                <li><i class="fas fa-meteor"></i> <strong>ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙŠØ²Ùƒ:</strong> ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø±Ø§Ø¨Ø· Ø¬Ùˆ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ</li>
                <li><i class="fas fa-volume-up"></i> <strong>Ø§Ù„ØµÙˆØª:</strong> Ø²Ù…ÙˆØ± Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø·Ø©</li>
                <li><i class="fas fa-level-up-alt"></i> <strong>Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª:</strong> Ø§Ø¯Ø±Ø³ Ø£ÙƒØ«Ø±ØŒ Ø§Ø±ØªÙØ¹ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</li>
            </ul>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="showPage('home')">
                    <i class="fas fa-arrow-left"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø·Ø§Øª -->
        <section id="stationsSection" class="stations-section" style="display:none;">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-satellite-dish"></i> Ø§Ù„Ù…Ø­Ø·Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h2>
                <div>
                    <button class="btn btn-primary" onclick="showCreateStationModal()">
                        <i class="fas fa-plus"></i> Ù…Ø­Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>
                    <button class="btn btn-secondary" onclick="refreshStations()">
                        <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«
                    </button>
                </div>
            </div>
            
            <div id="stationsContainer">
                <!-- Ø§Ù„Ù…Ø­Ø·Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                <div style="text-align: center; padding: 50px; color: #888;">
                    <i class="fas fa-spinner fa-spin fa-3x"></i>
                    <p style="margin-top: 20px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø·Ø§Øª...</p>
                </div>
            </div>
        </section>
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± -->
        <section id="adminSection" class="admin-panel" style="display:none;">
            <h2 class="section-title"><i class="fas fa-crown"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h2>
            
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="showAdminTab('users')">ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</button>
                <button class="admin-tab" onclick="showAdminTab('stations')">ğŸ›°ï¸ Ø§Ù„Ù…Ø­Ø·Ø§Øª</button>
                <button class="admin-tab" onclick="showAdminTab('logs')">ğŸ“‹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</button>
                <button class="admin-tab" onclick="showAdminTab('stats')">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
            </div>
            
            <!-- Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† -->
            <div id="adminUsersTab" class="admin-table">
                <table>
                    <thead>
                        <tr>
                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                            <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                            <th>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="adminUsersList">
                        <tr><td colspan="5" style="text-align: center;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Ù…Ø­Ø·Ø§Øª -->
            <div id="adminStationsTab" class="admin-table" style="display:none;">
                <table>
                    <thead>
                        <tr>
                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø·Ø©</th>
                            <th>Ø§Ù„Ù…Ø§Ù„Ùƒ</th>
                            <th>Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ†</th>
                            <th>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="adminStationsList">
                        <tr><td colspan="5" style="text-align: center;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Ø³Ø¬Ù„Ø§Øª -->
            <div id="adminLogsTab" class="admin-table" style="display:none;">
                <table>
                    <thead>
                        <tr>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                            <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                            <th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th>
                        </tr>
                    </thead>
                    <tbody id="adminLogsList">
                        <tr><td colspan="4" style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø¨Ø¹Ø¯</td></tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div id="adminStatsTab" style="display:none;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: rgba(26, 26, 74, 0.7); padding: 20px; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--neon-blue);">ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</h3>
                        <p style="font-size: 3rem; font-weight: bold;" id="statsUsers">0</p>
                    </div>
                    <div style="background: rgba(26, 26, 74, 0.7); padding: 20px; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--neon-blue);">ğŸ›°ï¸ Ø§Ù„Ù…Ø­Ø·Ø§Øª</h3>
                        <p style="font-size: 3rem; font-weight: bold;" id="statsStations">0</p>
                    </div>
                    <div style="background: rgba(26, 26, 74, 0.7); padding: 20px; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--neon-blue);">ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h3>
                        <p style="font-size: 3rem; font-weight: bold;" id="statsMessages">0</p>
                    </div>
                    <div style="background: rgba(26, 26, 74, 0.7); padding: 20px; border-radius: 15px; text-align: center;">
                        <h3 style="color: var(--neon-blue);">â±ï¸ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</h3>
                        <p style="font-size: 3rem; font-weight: bold;" id="statsStudyTime">0</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ØºØ±ÙØ© Ø§Ù„Ù…Ø­Ø·Ø© -->
        <div id="roomSection" class="room-container" style="display:none;">
            <div class="room-header">
                <div class="room-title-section">
                    <h1 id="roomTitle" class="room-title">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø·Ø©</h1>
                    <p id="roomOwner" class="room-owner">Ø§Ù„Ù…Ø§Ù„Ùƒ: ...</p>
                </div>
                <div>
                    <button class="btn btn-danger" onclick="leaveStation()">
                        <i class="fas fa-sign-out-alt"></i> Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ø©
                    </button>
                </div>
            </div>
            
            <div class="timer-container">
                <div id="roomTimer" class="timer-display">60:00</div>
                <p class="timer-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</p>
            </div>
            
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                </div>
                
                <div class="chat-input-container">
                    <input type="text" id="chatInput" class="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." onkeypress="if(event.key=='Enter') sendMessage()">
                    <button id="sendButton" class="btn btn-primary" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„
                    </button>
                </div>
                
                <div id="cooldownNotice" class="cooldown-notice"></div>
            </div>
        </div>
    </main>
    
    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <p>Â© 2024 ORBITX - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        <div class="footer-creators">
            <p>ÙÙƒØ±Ø©: <span>Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ù†Ø¨ÙŠÙ„</span> | ØªØ·ÙˆÙŠØ± ÙˆØ¥Ø´Ø±Ø§Ù: <span>Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠØ·Ù‡</span></p>
        </div>
        <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
            Ù…Ø­Ø·Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© - Ù†Ø³Ø®Ø© 1.0
        </p>
    </footer>
    
    <!-- Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                <button class="close-btn" onclick="toggleLoginModal()">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="loginEmail" class="form-input" placeholder="example@email.com">
            </div>
            <div class="form-group">
                <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="loginPassword" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
            </div>
            <div class="form-group">
                <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" id="loginUsername" class="form-input" placeholder="Ø§Ø³Ù…Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©">
            </div>
            <div class="form-actions">
                <button class="btn btn-primary" onclick="loginUser()" style="flex:1;">
                    <i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„
                </button>
                <button class="btn btn-secondary" onclick="toggleLoginModal()" style="flex:1;">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
            <p id="loginMessage" style="text-align: center; margin-top: 20px; color: #ff5555;"></p>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø© -->
    <div id="createStationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-plus-circle"></i> Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
                <button class="close-btn" onclick="closeCreateStationModal()">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø·Ø© *</label>
                <input type="text" id="stationTitle" class="form-input" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ø·Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©">
            </div>
            <div class="form-group">
                <label class="form-label">ÙˆØµÙ Ø§Ù„Ù…Ø­Ø·Ø©</label>
                <textarea id="stationDescription" class="form-input form-textarea" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ± Ø¹Ù† Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø·Ø©..."></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                <input type="text" id="studyLink" class="form-input" placeholder="https://joacademy.com/math">
                <small style="color: #aaa; display: block; margin-top: 5px;">Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø§Ø¨Ø· Ø¬Ùˆ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØŒ Ø³ÙŠØ¸Ù‡Ø± ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙŠØ²Ùƒ</small>
            </div>
            <div class="form-group">
                <label class="form-label">Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø·Ø© (Ø¯Ù‚Ø§Ø¦Ù‚) *</label>
                <input type="number" id="stationDuration" class="form-input" value="60" min="15" max="240">
            </div>
            <div class="form-group">
                <label class="form-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ *</label>
                <input type="number" id="maxParticipants" class="form-input" value="25" min="5" max="25">
            </div>
            <div class="form-actions">
                <button class="btn btn-primary" onclick="createStation()" style="flex:1;">
                    <i class="fas fa-rocket"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø©
                </button>
                <button class="btn btn-secondary" onclick="closeCreateStationModal()" style="flex:1;">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
            <p id="createStationMessage" style="text-align: center; margin-top: 20px; color: #ff5555;"></p>
        </div>
    </div>

    <!-- Ù…Ù„Ù API Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <script>
        // ==================== API Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================
        class SupabaseAPI {
            constructor(config) {
                this.url = config.URL;
                this.key = config.ANON_KEY;
                this.headers = {
                    'apikey': this.key,
                    'Authorization': `Bearer ${this.key}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=representation'
                };
            }

            // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            async getUsers() {
                try {
                    const response = await fetch(`${this.url}/rest/v1/users?select=*`, {
                        headers: this.headers
                    });
                    return await response.json();
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);
                    return [];
                }
            }

            // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø­Ø·Ø§Øª
            async getStations() {
                try {
                    const response = await fetch(`${this.url}/rest/v1/stations?select=*&order=created_at.desc`, {
                        headers: this.headers
                    });
                    return await response.json();
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø­Ø·Ø§Øª:', error);
                    return [];
                }
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø©
            async createStation(stationData) {
                try {
                    const response = await fetch(`${this.url}/rest/v1/stations`, {
                        method: 'POST',
                        headers: this.headers,
                        body: JSON.stringify(stationData)
                    });
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Ø®Ø·Ø£ ${response.status}: ${errorText}`);
                    }
                    
                    const result = await response.json();
                    return result[0] || result;
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø©:', error);
                    throw error;
                }
            }

            // Ø­Ø°Ù Ù…Ø­Ø·Ø©
            async deleteStation(stationId) {
                try {
                    const response = await fetch(`${this.url}/rest/v1/stations?id=eq.${stationId}`, {
                        method: 'DELETE',
                        headers: this.headers
                    });
                    return response.ok;
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø©:', error);
                    return false;
                }
            }

            // Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù…Ø­Ø·Ø©
            async joinStation(stationId, userId) {
                try {
                    const response = await fetch(`${this.url}/rest/v1/station_participants`, {
                        method: 'POST',
                        headers: this.headers,
                        body: JSON.stringify({
                            station_id: stationId,
                            user_id: userId,
                            joined_at: new Date().toISOString()
                        })
                    });
                    return response.ok;
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:', error);
                    return false;
                }
            }

            // Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù…
            async banUser(userEmail, reason) {
                try {
                    const users = await this.getUsers();
                    const user = users.find(u => u.email === userEmail);
                    
                    if (!user) return false;
                    
                    const response = await fetch(`${this.url}/rest/v1/users?id=eq.${user.id}`, {
                        method: 'PATCH',
                        headers: this.headers,
                        body: JSON.stringify({
                            is_banned: true,
                            ban_reason: reason || "Ø­Ø¸Ø± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¯ÙŠØ±"
                        })
                    });
                    return response.ok;
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
                    return false;
                }
            }
        }
    </script>

    <!-- Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <script>
        // ==================== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================
        let currentUser = null;
        let currentStation = null;
        let stationsData = [];
        let messageCooldown = false;
        let stationTimer = null;
        let supabaseConfig = null;
        let supabaseAPI = null;

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ====================
        window.onload = async function() {
            console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ ORBITX...');
            
            // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ…
            createStars();
            
            // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            await loadConfig();
            
            // 3. ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
            checkPreviousLogin();
            
            // 4. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            showPage('home');
        };

        // ==================== Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ====================
        function createStars() {
            const container = document.getElementById('stars-container');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDuration = Math.random() * 5 + 2 + 's';
                star.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(star);
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====================
        async function loadConfig() {
            try {
                if (window.ORBITX_CONFIG) {
                    supabaseConfig = window.ORBITX_CONFIG;
                    supabaseAPI = new SupabaseAPI(supabaseConfig);
                    
                    const connected = await testConnection();
                    if (connected) {
                        updateStatus('connected', 'âœ… Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                        await loadCurrentUser();
                    }
                    return;
                }
                
                updateStatus('disconnected', 'âš¡ ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ');
            } catch (error) {
                updateStatus('disconnected', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„');
            }
        }

        // ==================== Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ====================
        async function testConnection() {
            if (!supabaseAPI) return false;
            
            try {
                const response = await fetch(`${supabaseConfig.URL}/rest/v1/users?limit=1`, {
                    headers: {
                        'apikey': supabaseConfig.ANON_KEY,
                        'Authorization': `Bearer ${supabaseConfig.ANON_KEY}`
                    }
                });
                
                if (response.ok) {
                    updateStatus('connected', 'âœ… Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                    return true;
                } else {
                    updateStatus('disconnected', 'âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                    return false;
                }
            } catch (error) {
                updateStatus('disconnected', 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„');
                return false;
            }
        }

        // ==================== Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± ====================
        async function loadCurrentUser() {
            if (!supabaseAPI || !supabaseConfig.ADMIN_EMAIL) return;
            
            try {
                const users = await supabaseAPI.getUsers();
                const adminUser = users.find(u => u.email === supabaseConfig.ADMIN_EMAIL);
                
                if (adminUser) {
                    currentUser = {
                        id: adminUser.id,
                        email: adminUser.email,
                        username: adminUser.username || "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…",
                        isAdmin: true
                    };
                    
                    localStorage.setItem('orbitx_user', JSON.stringify(currentUser));
                    updateUserUI();
                    document.getElementById('adminBtn').style.display = 'inline-flex';
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
            }
        }

        // ==================== ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ====================
        function updateStatus(status, message) {
            const badge = document.getElementById('statusBadge');
            const icon = badge.querySelector('i');
            const text = badge.querySelector('span');
            
            badge.className = `status-badge status-${status}`;
            text.textContent = message;
            
            if (status === 'connected') {
                icon.className = 'fas fa-plug';
            } else {
                icon.className = 'fas fa-unplug';
            }
        }

        // ==================== Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØµÙØ­Ø§Øª ====================
        function showPage(pageId) {
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('rulesSection').style.display = 'none';
            document.getElementById('stationsSection').style.display = 'none';
            document.getElementById('adminSection').style.display = 'none';
            document.getElementById('roomSection').style.display = 'none';
            
            switch(pageId) {
                case 'home':
                    break;
                case 'rules':
                    document.getElementById('rulesSection').style.display = 'block';
                    break;
                case 'stations':
                    document.getElementById('stationsSection').style.display = 'block';
                    loadStations();
                    break;
                case 'admin':
                    if (currentUser && currentUser.email === 'abdalrhmanmaaith1@gmail.com') {
                        document.getElementById('adminSection').style.display = 'block';
                        showAdminTab('users');
                        loadAdminData();
                        document.getElementById('adminBtn').style.display = 'inline-flex';
                    } else {
                        alert('â›” Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…');
                        showPage('home');
                    }
                    break;
            }
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ====================
        function checkPreviousLogin() {
            const savedUser = localStorage.getItem('orbitx_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserUI();
                
                if (currentUser.email === 'abdalrhmanmaaith1@gmail.com') {
                    document.getElementById('adminBtn').style.display = 'inline-flex';
                }
            }
        }

        function toggleLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            
            if (modal.style.display === 'flex') {
                document.getElementById('loginEmail').focus();
            }
        }

        function loginUser() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const username = document.getElementById('loginUsername').value.trim();
            
            if (!email || !password || !username) {
                showLoginMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            currentUser = {
                email: email,
                username: username,
                level: 1,
                xp: 0,
                isAdmin: email === 'abdalrhmanmaaith1@gmail.com'
            };
            
            localStorage.setItem('orbitx_user', JSON.stringify(currentUser));
            updateUserUI();
            
            if (currentUser.isAdmin) {
                document.getElementById('adminBtn').style.display = 'inline-flex';
            }
            
            toggleLoginModal();
            showLoginMessage('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            setTimeout(() => showLoginMessage(''), 3000);
            
            if (currentUser.isAdmin) {
                setTimeout(() => showPage('admin'), 500);
            }
        }

        function showLoginMessage(message, type = '') {
            const msgElement = document.getElementById('loginMessage');
            msgElement.textContent = message;
            msgElement.style.color = type === 'error' ? '#ff5555' : 
                                   type === 'success' ? '#00ff88' : '#aaa';
        }

        function updateUserUI() {
            const loginBtn = document.getElementById('loginBtn');
            if (currentUser) {
                loginBtn.innerHTML = `<i class="fas fa-user"></i> ${currentUser.username}`;
                loginBtn.onclick = function() {
                    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                        logoutUser();
                    }
                };
            } else {
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                loginBtn.onclick = toggleLoginModal;
            }
        }

        function logoutUser() {
            currentUser = null;
            localStorage.removeItem('orbitx_user');
            document.getElementById('adminBtn').style.display = 'none';
            updateUserUI();
            showPage('home');
            alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ø§Øª ====================
        async function loadStations() {
            const container = document.getElementById('stationsContainer');
            
            if (!supabaseAPI) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: #888;">
                        <i class="fas fa-exclamation-triangle fa-3x"></i>
                        <p style="margin-top: 20px;">âš¡ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ</p>
                        <button class="btn btn-primary" onclick="showCreateStationModal()">
                            Ø£Ù†Ø´Ø¦ Ù…Ø­Ø·Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div style="text-align: center; padding: 50px; color: #888;">
                    <i class="fas fa-spinner fa-spin fa-3x"></i>
                    <p style="margin-top: 20px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø·Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
                </div>
            `;
            
            try {
                const stations = await supabaseAPI.getStations();
                
                if (stations.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 50px; color: #888;">
                            <i class="fas fa-satellite fa-3x"></i>
                            <p style="margin-top: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø·Ø§Øª Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                            <button class="btn btn-primary" onclick="showCreateStationModal()">
                                <i class="fas fa-plus"></i> Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ù…Ø­Ø·Ø©
                            </button>
                        </div>
                    `;
                    return;
                }
                
                displayStations(stations);
                
            } catch (error) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: #ff5555;">
                        <i class="fas fa-exclamation-triangle fa-3x"></i>
                        <p style="margin-top: 20px;">âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø·Ø§Øª</p>
                        <p style="color: #aaa;">${error.message}</p>
                        <button class="btn btn-secondary" onclick="loadStations()">
                            <i class="fas fa-sync-alt"></i> Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                        </button>
                    </div>
                `;
            }
        }

        function displayStations(stations) {
            const container = document.getElementById('stationsContainer');
            let html = '';
            
            stations.forEach(station => {
                const isFull = (station.current_participants || 0) >= (station.max_participants || 25);
                const status = isFull ? 'full' : 'active';
                const statusText = isFull ? 'Ù…Ù…ØªÙ„Ø¦Ø©' : 'Ù†Ø´Ø·Ø©';
                const statusClass = isFull ? 'status-full' : 'status-active';
                
                html += `
                    <div class="station-card" data-id="${station.id}">
                        <div class="station-card-header">
                            <h3 class="station-title">${station.title}</h3>
                            <span class="station-status ${statusClass}">${statusText}</span>
                        </div>
                        <p class="station-description">${station.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        <div class="station-meta">
                            <div>
                                <i class="fas fa-user"></i> 
                                <span class="station-participants">${station.current_participants || 0}/${station.max_participants || 25}</span>
                            </div>
                            <div>
                                <i class="fas fa-clock"></i> 60:00
                            </div>
                            <div>
                                <i class="fas fa-user-tie"></i> ${station.owner_id || 'Ù…Ø¬Ù‡ÙˆÙ„'}
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="joinStation('${station.id}')" ${isFull ? 'disabled' : ''} style="width: 100%;">
                            ${isFull ? 'Ø§Ù„Ù…Ø­Ø·Ø© Ù…Ù…ØªÙ„Ø¦Ø©' : 'Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ø­Ø·Ø©'}
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function refreshStations() {
            loadStations();
        }

        // ==================== Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø© ====================
        function showCreateStationModal() {
            if (!currentUser) {
                alert('â›” ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
                toggleLoginModal();
                return;
            }
            
            const modal = document.getElementById('createStationModal');
            modal.style.display = 'flex';
            document.getElementById('stationTitle').focus();
        }

        function closeCreateStationModal() {
            document.getElementById('createStationModal').style.display = 'none';
        }

        async function createStation() {
            if (!currentUser || !supabaseAPI) {
                alert('â›” ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            const title = document.getElementById('stationTitle').value.trim();
            const description = document.getElementById('stationDescription').value.trim();
            const studyLink = document.getElementById('studyLink').value.trim();
            const duration = parseInt(document.getElementById('stationDuration').value);
            const maxParticipants = parseInt(document.getElementById('maxParticipants').value);
            
            if (!title || !duration || !maxParticipants) {
                alert('â›” Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            if (maxParticipants > 25) {
                alert('â›” Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ù‡Ùˆ 25 Ø´Ø®ØµØ§Ù‹');
                return;
            }
            
            document.getElementById('createStationMessage').textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø©...';
            document.getElementById('createStationMessage').style.color = '#00c6ff';
            
            try {
                const startTime = new Date().toISOString();
                const endTime = new Date(Date.now() + duration * 60000).toISOString();
                
                const stationData = {
                    title: title,
                    description: description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ',
                    owner_id: currentUser.id,
                    study_link: studyLink || null,
                    max_participants: maxParticipants,
                    current_participants: 1,
                    start_time: startTime,
                    end_time: endTime,
                    status: 'active'
                };
                
                const newStation = await supabaseAPI.createStation(stationData);
                
                if (!newStation) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø©');
                }
                
                document.getElementById('createStationMessage').textContent = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø© Ø¨Ù†Ø¬Ø§Ø­!';
                document.getElementById('createStationMessage').style.color = '#00ff88';
                
                if (studyLink.includes('joacademy')) {
                    createMeteorEffect();
                }
                
                setTimeout(() => {
                    closeCreateStationModal();
                    loadStations();
                }, 2000);
                
                setTimeout(() => {
                    alert(`ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø·Ø© "${title}" Ø¨Ù†Ø¬Ø§Ø­!\nØ³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ù„Ù„Ù…Ø­Ø·Ø© Ø§Ù„Ø¢Ù†.`);
                    joinStation(newStation.id);
                }, 2500);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø·Ø©:', error);
                document.getElementById('createStationMessage').textContent = `âŒ Ø®Ø·Ø£: ${error.message}`;
                document.getElementById('createStationMessage').style.color = '#ff5555';
            }
        }

        // ==================== Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù…Ø­Ø·Ø© ====================
        async function joinStation(stationId) {
            if (!currentUser || !supabaseAPI) {
                alert('â›” ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            const joinBtn = event?.target || document.querySelector(`button[onclick*="${stationId}"]`);
            if (joinBtn) {
                joinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…...';
                joinBtn.disabled = true;
            }
            
            try {
                const success = await supabaseAPI.joinStation(stationId, currentUser.id);
                
                if (!success) {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ù…Ø­Ø·Ø©');
                }
                
                const stations = await supabaseAPI.getStations();
                const station = stations.find(s => s.id === stationId);
                
                if (!station) {
                    throw new Error('Ø§Ù„Ù…Ø­Ø·Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
                }
                
                currentStation = {
                    id: station.id,
                    title: station.title,
                    description: station.description,
                    owner: station.owner_id,
                    studyLink: station.study_link,
                    duration: Math.floor((new Date(station.end_time) - new Date(station.start_time)) / 60000),
                    participants: station.current_participants || 1,
                    maxParticipants: station.max_participants || 25
                };
                
                if (station.study_link && station.study_link.includes('joacademy')) {
                    setTimeout(createMeteorEffect, 500);
                }
                
                setTimeout(() => {
                    showRoom();
                    if (joinBtn) {
                        joinBtn.innerHTML = 'âœ… ØªÙ… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…';
                        setTimeout(() => {
                            joinBtn.innerHTML = 'Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ø­Ø·Ø©';
                            joinBtn.disabled = false;
                        }, 1000);
                    }
                }, 1000);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:', error);
                alert(`âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…: ${error.message}`);
                
                if (joinBtn) {
                    joinBtn.innerHTML = 'Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ø­Ø·Ø©';
                    joinBtn.disabled = false;
                }
            }
        }

        function showRoom() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('roomSection').style.display = 'block';
            
            document.getElementById('roomTitle').textContent = currentStation.title;
            document.getElementById('roomOwner').textContent = `Ø§Ù„Ù…Ø§Ù„Ùƒ: ${currentStation.owner}`;
            
            startTimer(currentStation.duration || 60);
            
            addChatMessage('ğŸ¤– Ù†Ø¸Ø§Ù…', `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.username}! Ø§Ù†Ø¶Ù…Ù…Øª Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø·Ø©.`);
            addChatMessage('ğŸ¤– Ù†Ø¸Ø§Ù…', 'ØªØ°ÙƒØ±: ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†.');
            
            if (currentStation.studyLink && currentStation.studyLink.includes('joacademy')) {
                setTimeout(createMeteorEffect, 1000);
            }
        }

        async function leaveStation() {
            if (!currentStation || !supabaseAPI) return;
            
            if (stationTimer) {
                clearInterval(stationTimer);
            }
            
            document.getElementById('roomSection').style.display = 'none';
            document.getElementById('stationsSection').style.display = 'block';
            
            await loadStations();
            
            alert('ØªÙ… Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ø©');
            currentStation = null;
        }

        // ==================== Ø§Ù„ØªØ§ÙŠÙ…Ø± ====================
        function startTimer(minutes) {
            let totalSeconds = minutes * 60;
            const timerElement = document.getElementById('roomTimer');
            
            if (stationTimer) {
                clearInterval(stationTimer);
            }
            
            stationTimer = setInterval(() => {
                if (totalSeconds <= 0) {
                    clearInterval(stationTimer);
                    timerElement.textContent = '00:00';
                    timerElement.style.color = '#ff0000';
                    
                    playAlertSound();
                    
                    addChatMessage('ğŸ¤– Ù†Ø¸Ø§Ù…', 'â° Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø·Ø©! Ø³ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø®Ù„Ø§Ù„ Ø¯Ù‚ÙŠÙ‚Ø©.');
                    
                    setTimeout(() => {
                        alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');
                        leaveStation();
                    }, 60000);
                    
                    return;
                }
                
                const mins = Math.floor(totalSeconds / 60);
                const secs = totalSeconds % 60;
                timerElement.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (totalSeconds < 300) {
                    timerElement.style.color = '#ff5555';
                }
                
                totalSeconds--;
            }, 1000);
        }

        // ==================== Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ====================
        function addChatMessage(sender, content, isSystem = false) {
            const chatContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            messageDiv.className = `message ${isSystem ? 'system' : ''}`;
            messageDiv.innerHTML = `
                <div class="message-sender">${sender}</div>
                <div class="message-content">${content}</div>
                <div class="message-time">${new Date().toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' })}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function sendMessage() {
            if (!currentUser || !currentStation) return;
            
            if (messageCooldown) {
                document.getElementById('cooldownNotice').textContent = 'â³ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† Ø¨ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„';
                return;
            }
            
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(currentUser.username, message);
            input.value = '';
            
            messageCooldown = true;
            document.getElementById('sendButton').disabled = true;
            document.getElementById('cooldownNotice').textContent = 'â³ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†';
            
            setTimeout(() => {
                messageCooldown = false;
                document.getElementById('sendButton').disabled = false;
                document.getElementById('cooldownNotice').textContent = '';
            }, 120000);
        }

        // ==================== ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© ====================
        function createMeteorEffect() {
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            meteor.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100px;
                height: 2px;
                background: linear-gradient(90deg, transparent, #ff5555, #ffaa00, transparent);
                transform: rotate(-45deg);
                z-index: 9999;
                pointer-events: none;
                animation: meteorFall 2s linear forwards;
            `;
            
            document.body.appendChild(meteor);
            
            if (currentStation) {
                addChatMessage('ğŸ¤– Ù†Ø¸Ø§Ù…', 'ğŸª„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙŠØ²Ùƒ! ØªÙ… ÙØªØ­ Ø±Ø§Ø¨Ø· Ø¬Ùˆ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ.', true);
            }
            
            setTimeout(() => meteor.remove(), 2000);
        }

        function playAlertSound() {
            console.log('ğŸ”” ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡');
        }

        // ==================== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± ====================
        function showAdminTab(tabId) {
            document.getElementById('adminUsersTab').style.display = 'none';
            document.getElementById('adminStationsTab').style.display = 'none';
            document.getElementById('adminLogsTab').style.display = 'none';
            document.getElementById('adminStatsTab').style.display = 'none';
            
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(`admin${tabId.charAt(0).toUpperCase() + tabId.slice(1)}Tab`).style.display = 'block';
            event.target.classList.add('active');
            
            switch(tabId) {
                case 'users':
                    loadAdminUsers();
                    break;
                case 'stations':
                    loadAdminStations();
                    break;
                case 'stats':
                    loadAdminStats();
                    break;
            }
        }

        function loadAdminData() {
            loadAdminUsers();
            loadAdminStations();
            loadAdminStats();
        }

        async function loadAdminUsers() {
            const container = document.getElementById('adminUsersList');
            
            if (!supabaseAPI) {
                container.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #ff5555;">âŒ ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>`;
                return;
            }
            
            try {
                const users = await supabaseAPI.getUsers();
                
                if (users.length === 0) {
                    container.innerHTML = `<tr><td colspan="5" style="text-align: center;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</td></tr>`;
                    return;
                }
                
                let html = '';
                users.forEach(user => {
                    const status = user.is_banned ? 'Ù…Ø­Ø¸ÙˆØ±' : 
                                 user.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 
                                 user.role === 'moderator' ? 'Ù…Ø±Ø§Ù‚Ø¨' : 'Ù…Ø³ØªØ®Ø¯Ù…';
                    const statusColor = user.is_banned ? 'color: #ff5555;' : 
                                      user.role === 'admin' ? 'color: #00ff88;' : 
                                      user.role === 'moderator' ? 'color: #00c6ff;' : 'color: #aaa;';
                    
                    html += `
                        <tr>
                            <td><strong>${user.username || user.email.split('@')[0]}</strong></td>
                            <td>${user.email}</td>
                            <td>${'â­'.repeat(user.level || 1)}</td>
                            <td><span style="${statusColor}">${status}</span></td>
                            <td>
                                <div class="admin-actions">
                                    ${!user.is_banned ? `
                                    <button class="admin-btn btn-danger" onclick="adminBanUser('${user.email}')">
                                        <i class="fas fa-ban"></i> Ø­Ø¸Ø±
                                    </button>
                                    ` : `
                                    <button class="admin-btn btn-success" onclick="adminUnbanUser('${user.email}')">
                                        <i class="fas fa-check"></i> ÙÙƒ Ø§Ù„Ø­Ø¸Ø±
                                    </button>
                                    `}
                                    <button class="admin-btn btn-secondary" onclick="adminPromoteUser('${user.email}')">
                                        <i class="fas fa-star"></i> ØªØ±Ù‚ÙŠØ©
                                    </button>
                                    ${user.role !== 'admin' ? `
                                    <button class="admin-btn btn-danger" onclick="adminDeleteUser('${user.id}')">
                                        <i class="fas fa-trash"></i> Ø­Ø°Ù
                                    </button>
                                    ` : ''}
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                container.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);
                container.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #ff5555;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</td></tr>`;
            }
        }

        async function loadAdminStations() {
            const container = document.getElementById('adminStationsList');
            
            if (!supabaseAPI) {
                container.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #ff5555;">âŒ ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>`;
                return;
            }
            
            try {
                const stations = await supabaseAPI.getStations();
                
                if (stations.length === 0) {
                    container.innerHTML = `<tr><td colspan="5" style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø·Ø§Øª</td></tr>`;
                    return;
                }
                
                let html = '';
                stations.forEach(station => {
                    html += `
                        <tr>
                            <td>${station.title}</td>
                            <td>${station.owner_id || 'Ù…Ø¬Ù‡ÙˆÙ„'}</td>
                            <td>${station.current_participants || 0}/${station.max_participants || 25}</td>
                            <td>60:00</td>
                            <td>
                                <div class="admin-actions">
                                    <button class="admin-btn btn-danger" onclick="adminDeleteStation('${station.id}')">
                                        <i class="fas fa-trash"></i> Ø­Ø°Ù
                                    </button>
                                    <button class="admin-btn btn-secondary" onclick="adminEditStation('${station.id}')">
                                        <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                container.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø­Ø·Ø§Øª:', error);
                container.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #ff5555;">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</td></tr>`;
            }
        }

        function loadAdminStats() {
            document.getElementById('statsUsers').textContent = '4';
            document.getElementById('statsStations').textContent = '3';
            document.getElementById('statsMessages').textContent = '42';
            document.getElementById('statsStudyTime').textContent = '156';
        }

        async function adminBanUser(userEmail) {
            const reason = prompt(`Ø£Ø¯Ø®Ù„ Ø³Ø¨Ø¨ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${userEmail}:`) || "Ø³Ø¨Ø¨ ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
            
            if (!reason) return;
            
            if (!confirm(`âš ï¸ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø¸Ø± ${userEmail}ØŸ Ø§Ù„Ø³Ø¨Ø¨: ${reason}`)) {
                return;
            }
            
            try {
                const success = await supabaseAPI.banUser(userEmail, reason);
                
                if (success) {
                    alert(`âœ… ØªÙ… Ø­Ø¸Ø± ${userEmail} Ø¨Ù†Ø¬Ø§Ø­`);
                    await loadAdminUsers();
                } else {
                    alert('âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
                alert('âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        async function adminDeleteStation(stationId) {
            if (!confirm('âš ï¸ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø·Ø©ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                return;
            }
            
            try {
                const success = await supabaseAPI.deleteStation(stationId);
                
                if (success) {
                    alert('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø© Ø¨Ù†Ø¬Ø§Ø­');
                    await loadStations();
                    await loadAdminStations();
                } else {
                    alert('âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø©');
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø©:', error);
                alert('âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø·Ø©');
            }
        }

        function adminUnbanUser(email) {
            alert(`ÙÙƒ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${email}\n(Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)`);
        }

        function adminPromoteUser(email) {
            alert(`ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${email}\n(Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)`);
        }

        function adminDeleteUser(userId) {
            alert(`Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userId}\n(Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)`);
        }

        function adminEditStation(stationId) {
            alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­Ø·Ø©: ${stationId}\n(Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)`);
        }
    </script>
</body>
</html>
